<div class="bg-light lter b-b wrapper-md">
 <h1 class="m-n font-thin h3">组织架构</h1>
</div>
<div class="wrapper-md ng-scope">
 <div class="col-sm-12">
  <button ng-click="try_async_load()" class="btn btn-default">重新加载组织结构树</button>
  <button ng-click="my_tree.select_first_branch()" class="btn btn-default btn-sm">根节点</button>
  <button ng-click="my_tree.expand_all()" class="btn btn-default btn-sm">全部展开</button>
  <button ng-click="my_tree.collapse_all()" class="btn btn-default btn-sm">全部收起</button>
  <div class="line b-b line-lg"></div>
  <div class="m-t-sm m-b-sm">
   <button ng-click="my_tree.select_next_sibling()" class="btn btn-default btn-sm">下一个机构</button>
   <button ng-click="my_tree.select_prev_sibling()" class="btn btn-default btn-sm">上一个机构</button>
   <button ng-click="my_tree.select_parent_branch()" class="btn btn-default btn-sm">父机构</button>
   <button ng-click="my_tree.expand_branch()" class="btn btn-default btn-sm">展开</button>
   <button ng-click="my_tree.collapse_branch()" class="btn btn-default btn-sm">收起</button>
  </div>
 </div>
 <div class="hbox hbox-auto-xs hbox-auto-sm">
  <div class="col">
   <div class="wrapper-md">
    <div class="b-a bg-light dk r r-2x">
     <span ng-if="doing_async">...loading...</span>
     <abn-tree
             tree-data         = "my_data"
             tree-control      = "my_tree"
             on-select         = "my_tree_handler(branch)"
             expand-level      = "2"
             icon-leaf         = "fa fa-file-o"
             icon-expand       = "fa fa-plus"
             icon-collapse     = "fa fa-minus"
     >
     </abn-tree>
    </div>
   </div>
  </div>
  <div class="col w-xxl bg-light b-r bg-auto">
   <div class="wrapper-md">
     <div class="alert alert-info">{{output}}</div>
     <tabset justified="true" class="tab-container">
       <tab heading="新增下级组织">
         <form name="addform" class="form-validation">
           <div class="line b-b line-lg"></div>
           <div class="form-group">
               <label>组织名称</label>
               <input type="text" class="form-control" placeholder="组织名称不能重复" ng-model="new_organization.org_name" required>
           </div>
           <div class="form-group">
               <label>门派昵称</label>
               <input type="text" class="form-control" placeholder="门派昵称不能重复" ng-model="new_organization.nickname" required>
           </div>
           <div class="form-group">
               <label>描述</label>
               <textarea class="form-control" placeholder="" rows="5" ng-model="new_organization.description"></textarea>
           </div>
           <button ng-click="try_adding_a_branch()" ng-disabled="addform.$invalid" class="btn btn-success btn-sm"><i class="fa fa-fw m-r-xs fa-plus"></i>确定</button>
         </form>
       </tab>
       <tab heading="编辑当前组织">
         <form name="editform" class="form-validation">
           <div class="line b-b line-lg"></div>
           <div class="form-group">
               <label>组织名称</label>
               <input type="text" class="form-control" required ng-model="current_organization.org_name">
           </div>
           <div class="form-group">
               <label>门派昵称</label>
               <input type="text" class="form-control" required ng-model="current_organization.nickname">
           </div>
           <div class="form-group">
               <label>排序</label>
               <input type="text" class="form-control" placeholder="" ng-model="current_organization.listorder">
           </div>
           <div class="form-group">
               <label>是否为业务部门</label>
               <label class="i-switch m-t-xs m-r">
                   <input type="checkbox" checked ng-model="current_organization.is_adviser">
                   <i></i>
               </label>
           </div>
           <div class="form-group">
               <label>描述</label>
               <textarea class="form-control" placeholder="" rows="5" ng-model="current_organization.description"></textarea>
           </div>
           <button ng-click="editing_current_branch()" ng-disabled="editform.$invalid" class="btn btn-success btn-sm"><i class="fa fa-fw m-r-xs fa-edit"></i>确定</button>
         </form>
       </tab>
     </tabset>
   </div>
  </div>
 </div>
</div>
<script type="text/ng-template" id="modal.html">
    <div ng-include="'tpl/modal.html'"></div>
</script>
